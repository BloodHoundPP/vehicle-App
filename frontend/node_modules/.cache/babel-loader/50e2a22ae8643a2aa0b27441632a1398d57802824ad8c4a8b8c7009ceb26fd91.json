{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{MapContainer,TileLayer,Marker,Polyline}from'react-leaflet';import L from'leaflet';import axios from'axios';import'leaflet/dist/leaflet.css';// Vehicle icon\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const vehicleIcon=new L.Icon({iconUrl:'https://cdn-icons-png.flaticon.com/512/744/744465.png',iconSize:[40,40],iconAnchor:[20,40]});function App(){const[position,setPosition]=useState(null);const[path,setPath]=useState([]);const[isRunning,setIsRunning]=useState(false);const intervalRef=useRef(null);const fetchLocation=async()=>{try{const res=await axios.get('http://localhost:5000/api/location');const{latitude,longitude}=res.data;const newPos=[latitude,longitude];setPosition(newPos);setPath(prev=>[...prev,newPos]);}catch(err){console.error('Error fetching location:',err);}};useEffect(()=>{if(isRunning){fetchLocation();intervalRef.current=setInterval(fetchLocation,3000);}else{clearInterval(intervalRef.current);}return()=>clearInterval(intervalRef.current);},[isRunning]);return/*#__PURE__*/_jsxs(\"div\",{style:{height:'100vh',width:'100vw',position:'relative'},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:20,left:80,zIndex:1000},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsRunning(prev=>!prev),children:isRunning?'⏸ Pause':'▶️ Play'})}),/*#__PURE__*/_jsxs(MapContainer,{center:[17.385044,78.486671],zoom:17,style:{height:'100%',width:'100%'},children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),position&&/*#__PURE__*/_jsx(Marker,{position:position,icon:vehicleIcon}),path.length>1&&/*#__PURE__*/_jsx(Polyline,{positions:path,color:\"blue\"})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","useRef","MapContainer","TileLayer","Marker","Polyline","L","axios","jsx","_jsx","jsxs","_jsxs","vehicleIcon","Icon","iconUrl","iconSize","iconAnchor","App","position","setPosition","path","setPath","isRunning","setIsRunning","intervalRef","fetchLocation","res","get","latitude","longitude","data","newPos","prev","err","console","error","current","setInterval","clearInterval","style","height","width","children","top","left","zIndex","onClick","center","zoom","url","icon","length","positions","color"],"sources":["C:/Users/HP/Documents/Gmap Track/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Polyline } from 'react-leaflet';\nimport L from 'leaflet';\nimport axios from 'axios';\nimport 'leaflet/dist/leaflet.css';\n\n// Vehicle icon\nconst vehicleIcon = new L.Icon({\n  iconUrl: 'https://cdn-icons-png.flaticon.com/512/744/744465.png',\n  iconSize: [40, 40],\n  iconAnchor: [20, 40]\n});\n\nfunction App() {\n  const [position, setPosition] = useState(null);\n  const [path, setPath] = useState([]);\n  const [isRunning, setIsRunning] = useState(false);\n  const intervalRef = useRef(null);\n\n  const fetchLocation = async () => {\n    try {\n      const res = await axios.get('http://localhost:5000/api/location');\n      const { latitude, longitude } = res.data;\n      const newPos = [latitude, longitude];\n      setPosition(newPos);\n      setPath(prev => [...prev, newPos]);\n    } catch (err) {\n      console.error('Error fetching location:', err);\n    }\n  };\n\n  useEffect(() => {\n    if (isRunning) {\n      fetchLocation();\n      intervalRef.current = setInterval(fetchLocation, 3000);\n    } else {\n      clearInterval(intervalRef.current);\n    }\n    return () => clearInterval(intervalRef.current);\n  }, [isRunning]);\n\n  return (\n    <div style={{ height: '100vh', width: '100vw', position: 'relative' }}>\n      {/* Play/Pause Button */}\n      <div style={{ position: 'absolute', top: 20, left: 80, zIndex: 1000 }}>\n        <button onClick={() => setIsRunning(prev => !prev)}>\n          {isRunning ? '⏸ Pause' : '▶️ Play'}\n        </button>\n      </div>\n\n      <MapContainer\n        center={[17.385044, 78.486671]}\n        zoom={17}\n        style={{ height: '100%', width: '100%' }}\n      >\n        <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\n\n        {position && <Marker position={position} icon={vehicleIcon} />}\n        {path.length > 1 && <Polyline positions={path} color=\"blue\" />}\n      </MapContainer>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}